// Upload.aspx.cs
using System;
using System.IO;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;

namespace FileUpload
{
    public class Upload : Page
    {
        protected HtmlInputFile fileUpload;
        protected Button btnUpload;
        protected Label lblMessage;
        protected Label lblError;

        protected void Page_Load(object sender, EventArgs e)
        {
            // No initialization needed on load for this simple form
        }

        protected void btnUpload_Click(object sender, EventArgs e)
        {
            if (fileUpload.PostedFile != null && fileUpload.PostedFile.ContentLength > 0)
            {
                string fileName = Path.GetFileName(fileUpload.PostedFile.FileName);
                string targetPath = Server.MapPath(".") + "\\" + fileName;

                try
                {
                    fileUpload.PostedFile.SaveAs(targetPath);
                    lblMessage.Text = "<center><h2>File Uploaded Successfully: " + fileName + "</h2><hr></center>";
                    lblMessage.Visible = true;
                    lblError.Visible = false;
                }
                catch
                {
                    lblError.Text = "There was some error. Maybe permissions?";
                    lblError.Visible = true;
                    lblMessage.Visible = false;
                }
            }
            else
            {
                lblError.Text = "No file selected or invalid upload.";
                lblError.Visible = true;
                lblMessage.Visible = false;
            }
        }
    }
}
